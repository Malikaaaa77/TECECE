{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add token to requests if available\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Handle response errors globally\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// Auth API functions\nexport const login = credentials => api.post('/auth/login', credentials);\nexport const loginUser = credentials => api.post('/auth/login', credentials); // Alias\nexport const register = userData => api.post('/auth/register', userData);\nexport const registerUser = userData => api.post('/auth/register', userData); // Alias\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('user');\n  return Promise.resolve();\n};\n\n// Profile API functions\nexport const getProfile = () => api.get('/user/profile');\nexport const updateProfile = profileData => api.put('/user/profile', profileData);\n\n// Payment API functions\nexport const uploadPayment = paymentData => {\n  const formData = new FormData();\n  Object.keys(paymentData).forEach(key => {\n    if (paymentData[key] !== null && paymentData[key] !== undefined) {\n      formData.append(key, paymentData[key]);\n    }\n  });\n  return api.post('/payments/upload', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n};\nexport const getPaymentHistory = (filters = {}) => {\n  const params = new URLSearchParams();\n  Object.keys(filters).forEach(key => {\n    if (filters[key]) {\n      params.append(key, filters[key]);\n    }\n  });\n  return api.get(`/payments/history?${params.toString()}`);\n};\nexport const approvePayment = paymentId => api.put(`/payments/${paymentId}/approve`);\nexport const rejectPayment = (paymentId, data = {}) => api.put(`/payments/${paymentId}/reject`, data);\n\n// Dashboard API functions\nexport const getDashboardData = () => api.get('/member/dashboard');\nexport const getMemberDashboard = () => api.get('/member/dashboard'); // Alias\n\nexport const getAdminDashboard = (params = {}) => {\n  const queryParams = new URLSearchParams();\n  Object.keys(params).forEach(key => {\n    if (params[key]) {\n      queryParams.append(key, params[key]);\n    }\n  });\n  return api.get(`/admin/dashboard?${queryParams.toString()}`);\n};\nexport const getAdminDashboardData = (params = {}) => getAdminDashboard(params); // Alias\n\n// Admin - Pending Approvals\nexport const getPendingApprovals = () => api.get('/admin/approvals');\n\n// Admin - Members Management\nexport const getAllMembers = () => api.get('/admin/members');\nexport const updateMemberStatus = (memberId, statusData) => api.put(`/admin/members/${memberId}/status`, statusData);\nexport const deleteUser = userId => api.delete(`/admin/members/${userId}`);\nexport const getMemberDetails = memberId => api.get(`/admin/members/${memberId}`);\n\n// Transactions API functions\nexport const getTransactions = (filters = {}) => {\n  const params = new URLSearchParams();\n  Object.keys(filters).forEach(key => {\n    if (filters[key]) {\n      params.append(key, filters[key]);\n    }\n  });\n  return api.get(`/transactions?${params.toString()}`);\n};\nexport const getAllTransactions = (filters = {}) => getTransactions(filters); // Alias\n\nexport const addExpense = expenseData => api.post('/transactions/expense', expenseData);\nexport const addIncome = incomeData => api.post('/transactions/income', incomeData);\nexport const updateTransaction = (transactionId, transactionData) => api.put(`/transactions/${transactionId}`, transactionData);\nexport const deleteTransaction = transactionId => api.delete(`/transactions/${transactionId}`);\n\n// File upload helper\nexport const uploadFile = (file, type = 'receipt') => {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('type', type);\n  return api.post('/upload', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n};\n\n// Additional utility functions\nexport const getCurrentUser = () => {\n  const userData = localStorage.getItem('user');\n  return userData ? JSON.parse(userData) : null;\n};\nexport const isAuthenticated = () => {\n  return !!localStorage.getItem('token');\n};\nexport const getAuthToken = () => {\n  return localStorage.getItem('token');\n};\n\n// Export the axios instance for custom requests\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","login","credentials","post","loginUser","register","userData","registerUser","logout","resolve","getProfile","get","updateProfile","profileData","put","uploadPayment","paymentData","formData","FormData","Object","keys","forEach","key","undefined","append","getPaymentHistory","filters","params","URLSearchParams","toString","approvePayment","paymentId","rejectPayment","data","getDashboardData","getMemberDashboard","getAdminDashboard","queryParams","getAdminDashboardData","getPendingApprovals","getAllMembers","updateMemberStatus","memberId","statusData","deleteUser","userId","delete","getMemberDetails","getTransactions","getAllTransactions","addExpense","expenseData","addIncome","incomeData","updateTransaction","transactionId","transactionData","deleteTransaction","uploadFile","file","type","getCurrentUser","JSON","parse","isAuthenticated","getAuthToken"],"sources":["C:/Users/Malik/Documents/TUGAS/Semester 6/TCC/ProjekTCCTeori/frontend/src/api/index.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Add token to requests if available\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Handle response errors globally\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Auth API functions\r\nexport const login = (credentials) => api.post('/auth/login', credentials);\r\nexport const loginUser = (credentials) => api.post('/auth/login', credentials); // Alias\r\nexport const register = (userData) => api.post('/auth/register', userData);\r\nexport const registerUser = (userData) => api.post('/auth/register', userData); // Alias\r\nexport const logout = () => {\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('user');\r\n  return Promise.resolve();\r\n};\r\n\r\n// Profile API functions\r\nexport const getProfile = () => api.get('/user/profile');\r\nexport const updateProfile = (profileData) => api.put('/user/profile', profileData);\r\n\r\n// Payment API functions\r\nexport const uploadPayment = (paymentData) => {\r\n  const formData = new FormData();\r\n  Object.keys(paymentData).forEach(key => {\r\n    if (paymentData[key] !== null && paymentData[key] !== undefined) {\r\n      formData.append(key, paymentData[key]);\r\n    }\r\n  });\r\n  \r\n  return api.post('/payments/upload', formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n    },\r\n  });\r\n};\r\n\r\nexport const getPaymentHistory = (filters = {}) => {\r\n  const params = new URLSearchParams();\r\n  Object.keys(filters).forEach(key => {\r\n    if (filters[key]) {\r\n      params.append(key, filters[key]);\r\n    }\r\n  });\r\n  return api.get(`/payments/history?${params.toString()}`);\r\n};\r\n\r\nexport const approvePayment = (paymentId) => api.put(`/payments/${paymentId}/approve`);\r\nexport const rejectPayment = (paymentId, data = {}) => api.put(`/payments/${paymentId}/reject`, data);\r\n\r\n// Dashboard API functions\r\nexport const getDashboardData = () => api.get('/member/dashboard');\r\nexport const getMemberDashboard = () => api.get('/member/dashboard'); // Alias\r\n\r\nexport const getAdminDashboard = (params = {}) => {\r\n  const queryParams = new URLSearchParams();\r\n  Object.keys(params).forEach(key => {\r\n    if (params[key]) {\r\n      queryParams.append(key, params[key]);\r\n    }\r\n  });\r\n  return api.get(`/admin/dashboard?${queryParams.toString()}`);\r\n};\r\nexport const getAdminDashboardData = (params = {}) => getAdminDashboard(params); // Alias\r\n\r\n// Admin - Pending Approvals\r\nexport const getPendingApprovals = () => api.get('/admin/approvals');\r\n\r\n// Admin - Members Management\r\nexport const getAllMembers = () => api.get('/admin/members');\r\nexport const updateMemberStatus = (memberId, statusData) => api.put(`/admin/members/${memberId}/status`, statusData);\r\nexport const deleteUser = (userId) => api.delete(`/admin/members/${userId}`);\r\nexport const getMemberDetails = (memberId) => api.get(`/admin/members/${memberId}`);\r\n\r\n// Transactions API functions\r\nexport const getTransactions = (filters = {}) => {\r\n  const params = new URLSearchParams();\r\n  Object.keys(filters).forEach(key => {\r\n    if (filters[key]) {\r\n      params.append(key, filters[key]);\r\n    }\r\n  });\r\n  return api.get(`/transactions?${params.toString()}`);\r\n};\r\n\r\nexport const getAllTransactions = (filters = {}) => getTransactions(filters); // Alias\r\n\r\nexport const addExpense = (expenseData) => api.post('/transactions/expense', expenseData);\r\nexport const addIncome = (incomeData) => api.post('/transactions/income', incomeData);\r\nexport const updateTransaction = (transactionId, transactionData) => api.put(`/transactions/${transactionId}`, transactionData);\r\nexport const deleteTransaction = (transactionId) => api.delete(`/transactions/${transactionId}`);\r\n\r\n// File upload helper\r\nexport const uploadFile = (file, type = 'receipt') => {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  formData.append('type', type);\r\n  \r\n  return api.post('/upload', formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n    },\r\n  });\r\n};\r\n\r\n// Additional utility functions\r\nexport const getCurrentUser = () => {\r\n  const userData = localStorage.getItem('user');\r\n  return userData ? JSON.parse(userData) : null;\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n  return !!localStorage.getItem('token');\r\n};\r\n\r\nexport const getAuthToken = () => {\r\n  return localStorage.getItem('token');\r\n};\r\n\r\n// Export the axios instance for custom requests\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}